<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>자동차 마커 표시하기</title>
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=vt8dqq5pyc"></script>
</head>
<body>
<div id="map" style="width:100%;height:400px;"></div>

<script>
// 자동차 아이콘 이미지 (네이버 기본 아이콘 예시)
var carIcon = {
    url: 'https://ssl.pstatic.net/static/maps/mantle/1x/marker-car.png',
    size: new naver.maps.Size(32, 32),
    origin: new naver.maps.Point(0, 0),
    anchor: new naver.maps.Point(16, 16)
};

// 서버에서 데이터 받아와서 지도에 마커 표시
fetch('https://seoul-locations.onrender.com/locations')
    .then(response => response.json())
    .then(data => {
        if (!data.locations || data.locations.length === 0) {
            alert('서버에서 위치 정보를 받아오지 못했습니다.');
            return;
        }

        // 지도 중심을 첫 번째 좌표로 설정
        var center = new naver.maps.LatLng(data.locations[0].lat, data.locations[0].lng);
        var map = new naver.maps.Map('map', {
            center: center,
            zoom: 12
        });

        // 각 좌표에 자동차 마커 표시
        data.locations.forEach(function(loc, idx) {
            new naver.maps.Marker({
                position: new naver.maps.LatLng(loc.lat, loc.lng),
                map: map,
                icon: carIcon,
                title: '자동차 위치 #' + (idx + 1)
            });
        });
    })
    .catch(error => {
        alert('위치 정보를 불러오는 중 오류가 발생했습니다.');
        console.error(error);
    });
</script>
</body>
</html>